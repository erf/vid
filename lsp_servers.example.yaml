# LSP Server Configuration for vid
#
# This file configures Language Server Protocol (LSP) support.
# Copy this file to one of these locations:
#   - ./lsp_servers.yaml (project-local)
#   - $XDG_CONFIG_HOME/vid/lsp_servers.yaml
#   - ~/.config/vid/lsp_servers.yaml

# Global toggle to enable/disable all LSP functionality
enabled: true

# Server configurations
# Each server is identified by a key (e.g., 'dart', 'lua', 'clangd')
# Built-in servers: dart, lua, clangd, swift
#
# You can override built-in servers or add new ones.
# Set a server to `false` or `null` to disable it.
#
# Per-server options:
#   enabled: false               # Disable this server (default: true)
#   disableSemanticTokens: true  # Use built-in regex highlighting instead of
#                                # LSP semantic tokens (useful when the built-in
#                                # highlighter produces better results)
servers:
  # Dart Analysis Server
  dart:
    name: "Dart Analysis Server"
    executable: "dart"
    args: ["language-server", "--protocol=lsp"]
    extensions: [dart]
    languageIds: [dart]
    projectMarkers: [pubspec.yaml, pubspec.lock]

  # Lua Language Server
  lua:
    name: "Lua Language Server"
    executable: "lua-language-server"
    args: []
    extensions: [lua]
    languageIds: [lua]
    projectMarkers: [".luarc.json", ".luarc.jsonc", ".luacheckrc", "init.lua"]

  # clangd (C/C++)
  clangd:
    name: "clangd"
    executable: "clangd"
    args: ["--background-index"]
    extensions: [c, h, cc, cpp, cxx, hpp, hxx]
    languageIds: [c, cpp]
    projectMarkers:
      - compile_commands.json
      - compile_flags.txt
      - .clangd
      - CMakeLists.txt
      - Makefile

  # SourceKit-LSP (Swift)
  # Uses built-in highlighting because it produces better results than LSP
  swift:
    name: "SourceKit-LSP"
    executable: "sourcekit-lsp"
    args: []
    extensions: [swift]
    languageIds: [swift]
    projectMarkers:
      - Package.swift
      - Podfile
      - "*.xcworkspace"
      - "*.xcodeproj"
    disableSemanticTokens: true

  # TypeScript Language Server (also handles JavaScript)
  # Requires: npm install -g typescript-language-server typescript
  typescript:
    name: "TypeScript Language Server"
    executable: "typescript-language-server"
    args: ["--stdio"]
    extensions: [ts, tsx, js, jsx, mjs, cjs, mts, cts]
    languageIds: [typescript, typescriptreact, javascript, javascriptreact]
    projectMarkers:
      - tsconfig.json
      - jsconfig.json
      - package.json

  # Example: Add rust-analyzer
  # rust:
  #   name: "rust-analyzer"
  #   executable: "rust-analyzer"
  #   args: []
  #   extensions: [rs]
  #   languageIds: [rust]
  #   projectMarkers: [Cargo.toml]

  # Example: Add Python LSP (pylsp or pyright)
  # python:
  #   name: "Python LSP Server"
  #   executable: "pylsp"
  #   args: []
  #   extensions: [py]
  #   languageIds: [python]
  #   projectMarkers: [pyproject.toml, setup.py, requirements.txt]

  # Example: Disable a built-in server (two equivalent ways)
  # lua: false
  # lua:
  #   enabled: false
